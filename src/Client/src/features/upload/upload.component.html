<div class="upload-container">
	<mat-card>
		<mat-card-header>
			<mat-card-title>Upload Video</mat-card-title>
		</mat-card-header>
		<mat-card-content>
			<form [formGroup]="uploadForm()" (ngSubmit)="onSubmit()">
				<mat-form-field appearance="fill">
					<mat-label>Title</mat-label>
					<input matInput formControlName="title" required>
					@if(uploadForm().get('title')?.hasError('required'))
					{
						<mat-error>
							Title is required.
						</mat-error>
					}
				</mat-form-field>

				
				<mat-form-field appearance="fill">
					<mat-label>Description</mat-label>
					<textarea matInput formControlName="description" rows="4"></textarea>
				</mat-form-field>
				
				<mat-form-field appearance="fill">
					<mat-label>Categories</mat-label>
					<mat-select formControlName="categories" multiple>
						@for(category of categories(); track category.id){
							<mat-option [value]="category.name">
							{{category.name}}
							</mat-option>
						}
					</mat-select>
				</mat-form-field>

				

            <div class="file-upload">
              <button type="button" mat-raised-button (click)="fileInput.click()">
                Choose Video File
              </button>
              <input hidden (change)="onFileSelected($event)" #fileInput type="file"
                     accept=".mp4,.avi,.mov">
			@if(selectedFile()){
				<span class="file-name">
					{{selectedFile()?.name}}
				</span>
			  }
            </div>

			
            
            <div class="actions">
              <button mat-raised-button color="primary" type="submit"
                      [disabled]="!isFormValid()">
                {{ isUploading() ? 'Uploading...' : 'Upload Video' }}
              </button>
            </div>

			</form>
		</mat-card-content>
	</mat-card>

</div>